<!DOCTYPE html>
<html>
<head>
    <title>X-WALL</title>
    <link href="style/main.css" rel="stylesheet" />
</head>
<body>
<div id="loading"></div>
<div id="preload-wrapper">
    <!--<img src="images/logo-large.png" />-->
    <script>
        var imageFiles = ["images/logo.png", "style/images/spirits.png"];
        var wrapper = document.getElementById("preload-wrapper");
        for (var i = 0; i < imageFiles.length; i++) {
            var img = document.createElement("img");
            img.src = imageFiles[i];
            wrapper.appendChild(img);
        }
    </script>
</div>
<script>
    var lang = function () {
        var langs = [
            {
                name: "en-US",
                title: "X-WALL",
                loading: "loading...",
                font: "Segoe UI, Arial"
            },
            {
                name: "zh-CN",
                title: "X-WALL",
                loading: "正在加载...",
                font: "微软雅黑, 黑体"
            }
        ];

        var langName;

        var langQuery = window.location.href.match(/[?&]lang=([^&]*)/);
        if (langQuery)
            langName = langQuery[1];

        langName =
            langName ||
            navigator.language ||
            navigator.userLanguage ||
            navigator.browserLanguage ||
            navigator.systemLanguage;

        return getLang(langName) || getLang(langName.substr(0, 2)) || langs[0];

        function getLang(name) {
            for (var i = 0; i < langs.length; i++) {
                if (langs[i].name.indexOf(name) == 0)
                    return langs[i];
            }
        }
    }();

    document.title = lang.title;
    document.body.style.fontFamily = lang.font;
    document.getElementById("loading").innerHTML = lang.loading;
</script>
<script src="scripts/vejis.js"></script>
<script>
    require_("scripts/main.js");

    //Google Analytics
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36452018-1']);
    _gaq.push(['_setDomainName', 'x-wall.org']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>
</html>
