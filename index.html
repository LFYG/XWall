<!DOCTYPE html>
<html>
<head>
    <title>X-WALL</title>
    <script>
        var queryString = function () {
            var str = (document.location.href.match(/\?(.+)?/) || [])[1];
            var map = {};

            if (str) {
                var items = str.split("&");
                for (var i = 0; i < items.length; i++) {
                    var groups = items[i].match(/([^=]+)=(.*)/);
                    if (groups)
                        map[decodeURIComponent(groups[1])] = decodeURIComponent(groups[2]);
                }
            }

            return map;
        }();

        var lang = function () {
            var langs = ["en-US", "zh-CN"];
            var langName =
                queryString["lang"] ||
                navigator.language ||
                navigator.userLanguage ||
                navigator.browserLanguage ||
                navigator.systemLanguage ||
                langs[0];

            return getLang(langName) || getLang(langName.substr(0, 2)) || langs[0];

            function getLang(name) {
                for (var i = 0; i < langs.length; i++) {
                    if (langs[i].indexOf(name) == 0)
                        return langs[i];
                }
            }
        }();

        window.location.href = lang + "/";
    </script>
</head>
<body></body>
</html>
